/* ========= Base / Layout ========= */
* { box-sizing: border-box; }
html, body { height: 100%; }

:root{
  --cal-blue:#003262;
  --cal-gold:#FDB515;
  --ink:#0f172a;
  --link:#0b5cab;
  --panel:#e6eef6;
  --border:#e5e7eb;
}

body{
  margin:0;
  font-family: Arial, Helvetica, sans-serif; /* Inter only used for title */
  font-weight:400;
  color:var(--ink);
  display:flex; flex-direction:column;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  text-rendering:optimizeLegibility;
}

/* ===== Buttons (reusable) ===== */
.btn{
  appearance:none;
  border:1px solid var(--link);
  background:#fff;
  color:var(--link);
  border-radius:8px;
  padding:8px 12px;
  cursor:pointer;
  font:inherit;
}
.btn--primary{
  background:var(--link);
  color:#fff;
}
.btn:hover{ filter:brightness(0.96); }

/* ===== Header ===== */
.header{
  display:flex; align-items:center; gap:12px;
  /* pad for iOS notch; keeps the very top blue */
  padding: calc(10px + env(safe-area-inset-top,0px)) 16px 10px;
  /* legacy fallback */
  padding-top: calc(10px + constant(safe-area-inset-top,0px));
  background:var(--cal-blue);
  color:var(--cal-gold);
  border-bottom:1px solid #0b2a55;
}
.header-stack{ display:flex; flex-direction:column; gap:2px; }
.header .title{
  font-family:'Inter', sans-serif;
  font-weight:600;
  font-size:1.45rem;
  line-height:1.25;
  color:var(--cal-gold);
  letter-spacing:.2px;
}
.header .tagline{ margin-top:2px; }
.header .tagline-link{ color:#e6edf7; text-decoration:underline; font-size:.98rem; }
.header .meta{ color:#cfe0f4; font-size:.88rem; line-height:1.25; }
.header .disclaimer{ color:#cfe0f4; font-size:.82rem; line-height:1.2; }
.header a{ color:inherit; }

/* ========= Search / Controls ========= */
.search-panel{
  display:flex; flex-wrap:wrap; align-items:center; gap:8px;
  padding:8px 16px;
  background:var(--panel);
  border-bottom:1px solid #cbd5e1;
}
.search-panel input[type="text"]{
  flex:1 1 600px; min-width:220px;
  padding:8px;
  border:1px solid #cbd5e1; border-radius:6px;
}
.search-panel input[type="number"]{
  width:72px; padding:6px; border:1px solid #cbd5e1; border-radius:6px;
}
.search-panel button{
  padding:8px 12px; border:1px solid var(--link); border-radius:6px;
  background:var(--link); color:#fff; cursor:pointer;
}
.search-panel button:hover{ filter:brightness(0.95); }
#status{ margin-left:auto; font-size:.9rem; color:#334155; }

/* ========= Main ========= */
main{
  flex:1 1 auto; min-height:0;
  display:grid; grid-template-columns:2fr 1fr;
}
#map{ width:100%; height:100%; }

#list{
  min-height:0; overflow:auto;
  background:#fff; border-left:1px solid var(--border);
  padding:10px 12px;
  font-size:.95rem; font-weight:400;
}
#list h2{ margin:8px 0 10px; color:var(--ink); font-size:1.05rem; font-weight:600; }

#results{ margin:0; padding-left:20px; }
#results li{
  margin:8px 0; padding:10px;
  border:1px solid var(--border);
  border-radius:8px; background:#fff;
}
#results li strong{ font-size:.98rem; font-weight:600; letter-spacing:0.1px; }
#results a{ color:var(--link); text-decoration:none; }
#results a:hover{ text-decoration:underline; }
#results small{ color:#475569; }

/* ========= Footer ========= */
footer{
  padding:10px 16px calc(10px + env(safe-area-inset-bottom,0px));
  /* legacy fallback for old iOS */
  padding-bottom: calc(10px + constant(safe-area-inset-bottom,0px));
  border-top:1px solid var(--border);
  background:#f8fafc;
  color:var(--ink);
}
footer small{
  display:inline-flex; gap:8px; flex-wrap:wrap; align-items:center;
}
footer a, footer button.footer-link{
  color:var(--link); text-decoration:underline;
  background:none; border:none; padding:0; font:inherit; cursor:pointer;
}

/* ========= Modal ========= */
.modal{
  position:fixed; inset:0; display:none;
  align-items:center; justify-content:center;
  background:rgba(15,23,42,.45); z-index:999;
}
.modal[aria-hidden="false"]{ display:flex; }
.modal__dialog{
  position:relative; width:min(640px,92vw); max-height:80vh; overflow:auto;
  background:#fff; color:var(--ink); border-radius:12px; padding:20px 20px 16px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
.modal__dialog h2{ margin:0 0 8px; color:var(--cal-blue); }
.modal__dialog p{ margin:8px 0; line-height:1.5; }
.modal__close{
  position:absolute; right:8px; top:6px;
  border:none; background:transparent; font-size:22px; line-height:1; cursor:pointer; color:var(--ink);
}

/* ========= Focus styles ========= */
a:focus, button:focus, input:focus{ outline:2px solid var(--cal-gold); outline-offset:2px; }

/* ========= Responsive ========= */
@media (max-width: 900px){
  main{
    grid-template-columns:1fr;
    grid-template-rows: 56vh auto; /* map height then list */
  }
  #map{ height:56vh; }
  #list{ border-left:0; border-top:1px solid var(--border); }
}

@media (max-width: 600px){
  /* tighter header */
  .header{ padding: calc(8px + env(safe-area-inset-top,0px)) 14px 8px; }
  .header img{ width:28px; height:28px; }
  .header .title{
    font-size: clamp(1.15rem, 3.6vw + .6rem, 1.55rem);
    line-height:1.22; letter-spacing:.1px;
  }
  .header .tagline{ margin-top:0; }
  .header .tagline-link{ font-size:.95rem; }
  .header .meta{ font-size:.85rem; line-height:1.25; }
  .header .disclaimer{ font-size:.80rem; }

  .search-panel{ gap:6px; padding:8px 12px; }
  .search-panel input[type="text"]{ flex:1 1 100%; min-width:0; padding:10px 12px; }
  .search-panel button{ padding:10px 14px; }
  .search-panel input[type="number"]{ width:68px; padding:8px; }
  #status{ font-size:.85rem; }

  #results li{ padding:8px 10px; }
}

@media (max-width: 360px){
  .header .title{ font-size:1.25rem; }
  .search-panel button{ padding:9px 12px; }
}
/* Show the toggle only on mobile */
.mobile-only { display: none; }
@media (max-width: 900px){
  .mobile-only { display: inline-flex; }
}

/* Collapsed map state */
main.map-collapsed { grid-template-rows: 0 auto; }
#map.is-hidden { display: none; }