/* ========= Base / Layout ========= */
* { box-sizing: border-box; }
html, body { height: 100%; }

:root{
  /* mobile map height variable; JS toggles .map-collapsed to set this to 0 */
  --map-h: 56vh;
}

body{
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  font-weight: 400;
  color: #0f172a;
  display: flex;
  flex-direction: column;          /* header -> controls -> main -> footer */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  background: #ffffff;
}

/* ===== Header (safe-area + Cal blue) ===== */
.header{
  display: flex;
  align-items: center;
  gap: 12px;
  padding: calc(10px + env(safe-area-inset-top)) 16px 10px 16px; /* fill behind iOS status bar */
  background: #003262;                 /* Berkeley Blue */
  color: #FDB515;                      /* Cal Gold accents */
  border-bottom: 1px solid #0b2a55;
}

.header-stack{ display:flex; flex-direction:column; gap:2px; }

.header .title{
  font-family: 'Inter', sans-serif;
  font-weight: 600;
  font-size: 1.45rem;
  line-height: 1.25;
  color: #FDB515;
  letter-spacing: .2px;
}

.header .tagline{ margin-top: 2px; }
.header .tagline-link{ color:#e6edf7; text-decoration: underline; font-size: .98rem; }
.header .meta{ color:#cfe0f4; font-size:.88rem; line-height:1.25; }
.header .disclaimer{ color:#cfe0f4; font-size:.82rem; line-height:1.2; }
.header a{ color: inherit; }

/* ========= Search / Controls ========= */
.search-panel{
  display:flex; flex-wrap:wrap; align-items:center; gap:8px;
  padding:8px 16px;
  background:#e6eef6;
  border-bottom:1px solid #cbd5e1;
}
.search-panel input[type="text"]{
  flex:1 1 600px; min-width:220px; padding:8px;
  border:1px solid #cbd5e1; border-radius:6px;
}
.search-panel input[type="number"]{
  width:72px; padding:6px; border:1px solid #cbd5e1; border-radius:6px;
}
.search-panel button{
  padding:8px 12px; border:1px solid #0b5cab; border-radius:6px;
  background:#0b5cab; color:#fff; cursor:pointer;
}
.search-panel button:hover{ filter:brightness(.95); }
#status{ margin-left:auto; font-size:.9rem; color:#334155; }

/* ========= Main (map + list) ========= */
main{
  flex: 1 1 auto;
  min-height: 0;                      /* allow children to shrink within viewport */
  display: grid;
  grid-template-columns: 2fr 1fr;     /* desktop side-by-side */
}
#map{ width:100%; height:100%; }

#list{
  min-height: 0;
  overflow:auto;
  background:#fff;
  border-left:1px solid #e5e7eb;
  padding:10px 12px;
  font-size:.95rem;
  font-weight:400;
}
#list h2{
  margin:8px 0 10px; color:#0f172a;
  font-size:1.05rem; font-weight:600;
}

#results{ margin:0; padding-left:20px; }
#results li{
  margin:8px 0; padding:10px;
  border:1px solid #e5e7eb; border-radius:8px; background:#fff;
}
#results li strong{ font-size:.98rem; font-weight:600; letter-spacing:.1px; }
#results a{ color:#0b5cab; text-decoration:none; }
#results a:hover{ text-decoration:underline; }
#results small{ color:#475569; }

/* ========= Footer (always readable; safe-area bottom) ========= */
footer{
  padding: 10px 16px calc(10px + env(safe-area-inset-bottom));
  border-top:1px solid #e5e7eb;
  background:#f8fafc;
  color:#0f172a;
}
footer small{ display:inline-flex; gap:8px; flex-wrap:wrap; align-items:center; }
footer a, footer button.footer-link{
  color:#0b5cab; text-decoration:underline; background:none; border:none; padding:0; font:inherit; cursor:pointer;
}

/* ========= Modal ========= */
.modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(15,23,42,.45); z-index:999;
}
.modal[aria-hidden="false"]{ display:flex; }
.modal__dialog{
  position:relative; width:min(640px, 92vw); max-height:80vh; overflow:auto;
  background:#fff; color:#0f172a; border-radius:12px; padding:20px 20px 16px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
.modal__dialog h2{ margin:0 0 8px; color:#003262; }
.modal__dialog p{ margin:8px 0; line-height:1.5; }
.modal__close{
  position:absolute; right:8px; top:6px; border:none; background:transparent;
  font-size:22px; line-height:1; cursor:pointer; color:#0f172a;
}

/* ========= Responsive / Mobile ========= */
@media (max-width: 900px){
  /* Stack map over list; map height is a CSS variable the JS toggles */
  main{
    grid-template-columns: 1fr;
    grid-template-rows: var(--map-h) auto;   /* map height then list */
  }

  /* When JS adds .map-collapsed to <main>, hide map by setting height to 0 */
  main.map-collapsed{ --map-h: 0vh; }
  #list{ border-left:0; border-top:1px solid #e5e7eb; }

  /* Header tighten + keep Cal blue behind island */
  .header{ padding: calc(8px + env(safe-area-inset-top)) 14px 8px 14px; }
  .header img{ width:28px; height:28px; }
  .header .title{
    font-size: clamp(1.15rem, 3.6vw + 0.6rem, 1.55rem);
    line-height: 1.22; letter-spacing:.1px;
  }
  .header .tagline{ margin-top:0; }
  .header .tagline-link{ font-size:.95rem; }
  .header .meta{ font-size:.85rem; line-height:1.25; }
  .header .disclaimer{ font-size:.80rem; }

  /* Search spacing */
  .search-panel{ gap:6px; padding:8px 12px; }
  .search-panel input[type="text"]{ flex:1 1 100%; min-width:0; padding:10px 12px; }
  .search-panel button{ padding:10px 14px; }
  .search-panel input[type="number"]{ width:68px; padding:8px; }

  /* Card density on mobile */
  #results li{ padding:8px 10px; }
  #results li strong{ font-weight:600; font-size:.98rem; }
}

/* Tiny phones */
@media (max-width: 360px){
  .header .title{ font-size:1.25rem; }
  .search-panel button{ padding:9px 12px; }
}

/* ========= Focus styles ========= */
a:focus, button:focus, input:focus{
  outline:2px solid #FDB515; outline-offset:2px;
}